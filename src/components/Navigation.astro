---
import MenuIcon from './icon/MenuIcon.astro';
import ThemeIcon from './ThemeIcon.astro';

const { pageTitle = 'Dimensional Debris' } = Astro.props;
const currentPath = Astro.url.pathname;
const navItems = [
  { href: '/', label: 'Home' },
  { href: '/blog/', label: 'Blog' },
  { href: '/about/', label: 'About' },
];

---

<div class="drawer md:hidden">
  <input id="mobile-nav-drawer" type="checkbox" class="drawer-toggle" />

  <div class="drawer-content">
    <div class="navbar fixed top-0 left-0 z-50 w-full border-b border-base-200 bg-base-100/90 backdrop-blur-md">
      <div class="navbar-start flex items-center gap-2">
        <label for="mobile-nav-drawer" aria-label="open sidebar" class="btn btn-square btn-ghost">
          <MenuIcon />
        </label>
        <a href="/" class="font-bold truncate max-w-[42vw]">{pageTitle}</a>
      </div>

      <div class="navbar-end">
        <ThemeIcon />
      </div>
    </div>

    <!--<nav class="mobile-dock" aria-label="底部导航">-->
    <!--  {navItems.map((item) => (-->
    <!--    <a class:list={["dock-link", currentPath === item.href && 'is-active']} href={item.href}>-->
    <!--      {item.label}-->
    <!--    </a>-->
    <!--  ))}-->
    <!--</nav>-->
  </div>

  <div class="drawer-side z-[60]">
    <label for="mobile-nav-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
    <ul class="menu min-h-full w-64 bg-base-200 p-4">
      <li class="menu-title">导航</li>
      {navItems.map((item) => (
        <li><a href={item.href}>{item.label}</a></li>
      ))}
      <li><a href="https://github.com/" target="_blank" rel="noreferrer">GitHub</a></li>
    </ul>
  </div>
</div>

<style>
  .mobile-dock {
    position: fixed;
    left: 50%;
    bottom: 0.8rem;
    z-index: 50;
    display: flex;
    gap: 0.4rem;
    transform: translateX(-50%);
    border-radius: 999px;
    border: 1px solid color-mix(in oklab, var(--color-base-content) 15%, transparent);
    background: color-mix(in oklab, var(--color-base-100) 82%, transparent);
    padding: 0.45rem;
    box-shadow: 0 8px 32px rgba(15, 23, 42, 0.16);
    backdrop-filter: blur(10px);
  }

  .dock-link {
    border-radius: 999px;
    padding: 0.45rem 0.85rem;
    font-size: 0.9rem;
  }

  .dock-link.is-active {
    background: color-mix(in oklab, var(--color-primary) 20%, transparent);
    color: var(--color-primary);
    font-weight: 600;
  }
</style>
