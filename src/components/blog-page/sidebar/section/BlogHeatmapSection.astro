---
// BlogHeatmapSection.astro - Blog-specific heatmap using actual data
type HeatmapDay = {
  date: string;
  count: number;
  level: number;
};

interface Props {
  heatmap: HeatmapDay[][];
}

const { heatmap } = Astro.props as Props;
const levelText = [
  "0 次提交",
  "1-2 次提交",
  "3-5 次提交",
  "6-8 次提交",
  "9+ 次提交",
];
---

<div class="heatmap-section p-4">
  <div class="overflow-x-auto pb-2">
    <div class="grid min-w-[280px] grid-flow-col gap-1">
      {
        heatmap.map((week) => (
          <div class="grid grid-rows-7 gap-1">
            {week.map((day) => (
              <div
                class:list={[
                  "h-3 w-3 rounded-[3px] hover:ring-2 hover:ring-primary transition-all cursor-pointer",
                  day.level === 0 && "bg-base-300/70",
                  day.level === 1 && "bg-level-1",
                  day.level === 2 && "bg-level-2",
                  day.level === 3 && "bg-level-3",
                  day.level === 4 && "bg-level-4",
                ]}
                title={`${day.date} · ${day.count} commits`}
                aria-label={`${day.date} ${levelText[day.level]}`}
              />
            ))}
          </div>
        ))
      }
    </div>
  </div>

</div>
<style>
  .bg-level-1 {
    background-color: #a5cad2;
  }
  .bg-level-2 {
    background-color: #6ba0b3;
  }
  .bg-level-3 {
    background-color: #508fa3;
  }
  .bg-level-4 {
    background-color: #3a7a8f;
  }
</style>
