---
// BlogHeatmapSection.astro - Blog-specific heatmap using actual data
const { heatmap } = Astro.props;
const levelText = [
  "0 次提交",
  "1-2 次提交",
  "3-5 次提交",
  "6-8 次提交",
  "9+ 次提交",
];
---

<div class="heatmap-section p-4">
  <h3 class="text-sm font-semibold mb-3 text-base-content/70">
    博客更新热力图
  </h3>
  <div class="overflow-x-auto pb-2">
    <div class="grid min-w-[280px] grid-flow-col gap-1">
      {
        heatmap.map((week) => (
          <div class="grid grid-rows-7 gap-1">
            {week.map((day) => (
              <div
                class:list={[
                  "h-3 w-3 rounded-[3px] hover:ring-2 hover:ring-primary transition-all cursor-pointer",
                  day.level === 0 && "bg-base-300/70",
                  day.level === 1 && "bg-emerald-200",
                  day.level === 2 && "bg-emerald-400",
                  day.level === 3 && "bg-emerald-600",
                  day.level === 4 && "bg-emerald-800",
                ]}
                title={`${day.date} · ${day.count} commits`}
                aria-label={`${day.date} ${levelText[day.level]}`}
              />
            ))}
          </div>
        ))
      }
    </div>
  </div>

  <div
    class="mt-4 flex flex-wrap items-center gap-2 text-xs text-base-content/70"
  >
    <span>Less</span>
    {
      levelText.map((text, level) => (
        <span class="inline-flex items-center gap-1">
          <span
            class:list={[
              "h-3 w-3 rounded-[3px]",
              level === 0 && "bg-base-300/70",
              level === 1 && "bg-emerald-200",
              level === 2 && "bg-emerald-400",
              level === 3 && "bg-emerald-600",
              level === 4 && "bg-emerald-800",
            ]}
          />
          <span class="hidden sm:inline">{text}</span>
        </span>
      ))
    }
    <span>More</span>
  </div>
</div>
