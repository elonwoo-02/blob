---
// NavigationSection.astro - Navigation buttons for Moment and Article views
---

<div class="navigation-section px-3 py-2">
  <div class="flex flex-col gap-1">
    <!-- MEMO (Article View) -->
    <button
      data-view="article"
      class="nav-button group flex items-center justify-between w-full px-4 py-2 text-left rounded-xl transition-all duration-200 btn-active"
    >
      <div class="flex items-center gap-3">
        <div class="icon-container opacity-70 group-[.btn-active]:opacity-100">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5"
            viewBox="0 0 20 20"
            fill="currentColor"
          >
            <path
              d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"
            ></path>
          </svg>
        </div>
        <span class="font-bold text-sm tracking-wide">MEMO</span>
      </div>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="w-4 h-4 opacity-0 group-[.btn-active]:opacity-100 transition-opacity"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2.5"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"
        ></path>
      </svg>
    </button>

    <!-- Moments -->
    <button
      data-view="moment"
      class="nav-button group flex items-center justify-between w-full px-4 py-2 text-left rounded-xl transition-all duration-200 hover:bg-base-200/50 text-base-content/70"
    >
      <div class="flex items-center gap-3">
        <div class="icon-container opacity-70 group-[.btn-active]:opacity-100">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5"
            viewBox="0 0 20 20"
            fill="currentColor"
          >
            <path
              fill-rule="evenodd"
              d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z"
              clip-rule="evenodd"></path>
          </svg>
        </div>
        <span class="font-medium text-sm">Moments</span>
      </div>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="w-4 h-4 opacity-0 group-[.btn-active]:opacity-100 transition-opacity"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2.5"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"
        ></path>
      </svg>
    </button>
  </div>
</div>

<style>
  /* Active State Styling - Flomo Green */
  .nav-button.btn-active {
    background-color: #00c853; /* Flomo Green */
    color: white;
    box-shadow: 0 4px 12px rgba(0, 200, 83, 0.2);
  }

  .nav-button.btn-active .icon-container {
    opacity: 1;
  }

  /* Inactive State Hover */
  .nav-button:not(.btn-active):hover {
    background-color: #f3f4f6;
    color: #1f2937;
  }
</style>

<script>
  const navButtons = document.querySelectorAll(".nav-button");

  navButtons.forEach((button) => {
    button.addEventListener("click", () => {
      const view = button.getAttribute("data-view");

      // Remove active state from all buttons
      navButtons.forEach((btn) => {
        btn.classList.remove("btn-active");
        btn.classList.add("text-base-content/70", "hover:bg-base-200/50");
      });

      // Add active state to clicked button
      button.classList.add("btn-active");
      button.classList.remove("text-base-content/70", "hover:bg-base-200/50");

      // Dispatch custom event with view type
      const event = new CustomEvent("view-changed", { detail: { view } });
      window.dispatchEvent(event);
    });
  });
</script>
