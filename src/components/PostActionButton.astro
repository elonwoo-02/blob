---
const {
  label,
  title,
  count,
  active = false,
  action,
  activeLabel,
  inactiveLabel
} = Astro.props;
const resolvedInactiveLabel = inactiveLabel ?? label;
const resolvedActiveLabel = activeLabel ?? label;
---

<button
  class:list={['post-action-btn', active && 'is-active']}
  type="button"
  aria-label={title ?? label}
  data-action={action}
  data-initial-count={typeof count === 'number' ? count : undefined}
  data-active-label={resolvedActiveLabel}
  data-inactive-label={resolvedInactiveLabel}
>
  <span class="post-action-icon" aria-hidden="true">
    <slot name="icon" />
  </span>
  <span class="post-action-label">{active ? resolvedActiveLabel : resolvedInactiveLabel}</span>
  {typeof count === 'number' && <span class="post-action-count">{count}</span>}
</button>

<style>
  .post-action-btn {
    align-items: center;
    background: transparent;
    border: 1px solid transparent;
    border-radius: 999px;
    color: hsl(var(--bc));
    cursor: pointer;
    display: inline-flex;
    font-size: 0.78rem;
    font-weight: 600;
    gap: 0.35rem;
    padding: 0.35rem 0.6rem;
    transition: transform 0.2s ease, border-color 0.2s ease, background 0.2s ease, color 0.2s ease;
  }

  .post-action-btn:hover {
    border-color: hsl(var(--bc) / 0.18);
    background: hsl(var(--b2));
    transform: translateY(-1px);
  }

  .post-action-btn:focus-visible {
    outline: 2px solid hsl(var(--p));
    outline-offset: 2px;
  }

  .post-action-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .post-action-count {
    background: hsl(var(--b2));
    border-radius: 999px;
    padding: 0.05rem 0.35rem;
    font-size: 0.7rem;
    color: hsl(var(--bc) / 0.8);
  }

  .post-action-btn.is-active {
    color: hsl(var(--p));
    border-color: transparent;
    background: hsl(var(--p) / 0.08);
  }
</style>
