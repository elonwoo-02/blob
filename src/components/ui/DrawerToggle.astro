---
// DrawerToggle.astro - Toggle button for opening/closing the drawer
---

<button
  id="drawer-toggle"
  class="absolute top-1/2 -translate-y-1/2 left-0 z-50 p-2.5 hover:bg-base-200 text-base-content/40 hover:text-base-content/70 rounded-xl transition-all duration-300 hidden"
  aria-label="Toggle Sidebar"
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="w-5 h-5"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="1.8"
    stroke-linecap="round"
    stroke-linejoin="round"
  >
    <!-- Sidebar Layout Icon -->
    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-width="1.8"
    ></rect>
    <line x1="9" y1="3" x2="9" y2="21" stroke-width="1.8"></line>
  </svg>
</button>

<script>
  const toggleButton = document.getElementById("drawer-toggle");

  toggleButton?.addEventListener("click", () => {
    const event = new CustomEvent("toggle-drawer");
    window.dispatchEvent(event);
  });

  // Listen for drawer state changes to hide/show the toggle button
  window.addEventListener("drawer-state-changed", (event: any) => {
    const { isOpen } = event.detail;
    if (isOpen) {
      toggleButton?.classList.add("hidden");
    } else {
      toggleButton?.classList.remove("hidden");
    }
  });

  // Check initial state (if needed, but usually sidebar starts open in blog.astro)
</script>
